# =============================================================================
# Kustomization - All Services (Develop)
# =============================================================================
# 적용: kubectl apply -k k8s/overlays/develop/all-services
#
# 이 kustomization은 모든 서비스를 한 번에 배포합니다.
# 개별 서비스 배포는 각 서비스의 overlays/develop 디렉토리를 사용하세요.

apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# 모든 리소스 포함
resources:
  # 1. Namespace, Shared Config, Ingress
  - ..

  # 2. Infrastructure (DB, Redis, etc.)
  - ../../../../infrastructure/overlays/develop

  # 3. Backend Services (base - deployment, service, configmap, secret)
  - ../../../../services/auth-service/k8s/base
  - ../../../../services/user-service/k8s/base
  - ../../../../services/board-service/k8s/base
  - ../../../../services/chat-service/k8s/base
  - ../../../../services/noti-service/k8s/base
  - ../../../../services/storage-service/k8s/base
  - ../../../../services/video-service/k8s/base

  # 4. Frontend
  - ../../../../services/frontend/k8s/base

# Image overrides for kind load (local tag)
images:
  - name: auth-service
    newTag: local
  - name: user-service
    newTag: local
  - name: board-service
    newTag: local
  - name: chat-service
    newTag: local
  - name: noti-service
    newTag: local
  - name: storage-service
    newTag: local
  - name: video-service
    newTag: local
  - name: frontend
    newTag: local
