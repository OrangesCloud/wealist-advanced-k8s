# =============================================================================
# Kustomization - Develop Environment (Docker Hub)
# =============================================================================
# 적용: DOCKER_HUB_ID=your-id make k8s-apply-dockerhub
#
# 이 overlay는 Docker Hub에서 이미지를 가져오는 배포용입니다.
# 이미지는 <DOCKER_HUB_ID>/wealist-<service>:latest 형식입니다.
#
# 사용법:
#   DOCKER_HUB_ID=212clab ./docker/scripts/docker-hub/build-and-push.sh
#   DOCKER_HUB_ID=212clab make k8s-apply-dockerhub

apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: wealist-dev

resources:
  - ../../base/namespace-dev
  - ../../base/shared
  - ../develop/ingress.yaml

labels:
  - pairs:
      app.kubernetes.io/env: develop
      app.kubernetes.io/registry: dockerhub
    includeSelectors: false

patches:
  - target:
      kind: ConfigMap
      name: wealist-shared-config
    patch: |-
      - op: replace
        path: /data/ENV
        value: "develop"
      - op: replace
        path: /data/LOG_LEVEL
        value: "debug"
